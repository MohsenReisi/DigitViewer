/* TextWriter.h - .txt Writer Object
 * 
 * Author           : Alexander J. Yee
 * Date Created     : 07/25/2013
 * Last Modified    : 07/25/2013
 * 
 */

#pragma once
#ifndef _ycr_TextWriter_H
#define _ycr_TextWriter_H
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
//  Dependencies
#include "DigitWriter.h"
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
namespace DigitViewer{
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
class TextWriter : public DigitWriter{
public:
    virtual ~TextWriter();

    //  Create a new writer.
    //  If "first_digits" is not an empty string, all digits before the first
    //  decimal place will be written to the start of the file.
    //  For ASCII char input, use:   raw = false
    //  For raw integer input, use:  raw = true
    TextWriter(
        const std::wstring& path,
        const std::string& first_digits = "",
        bool raw = false,
        int radix = 10
    );

    virtual void    write   (char* str, upL_t digits);

private:
    //  File handle
    FileIO::BasicFile file;

    //  Function pointer for digit conversion.
    void (*fp_convert)(char*, upL_t);
};
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
}
#endif
